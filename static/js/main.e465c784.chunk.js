(this["webpackJsonpsome-react-app"]=this["webpackJsonpsome-react-app"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(17)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),c=a.n(i),s=(a(13),a(14),a(1)),o=a(2),l=a(4),u=a(3),d=a(5),m=(a(15),a(16),{weatherTypes:{clouds:"\u041e\u0431\u043b\u0430\u0447\u043d\u043e",clear:"\u042f\u0441\u043d\u043e",rain:"\u0414\u043e\u0436\u0434\u044c"},weekDays:{mon:"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a",tue:"\u0412\u0442\u043e\u0440\u043d\u0438\u043a",wed:"\u0421\u0440\u0435\u0434\u0430",thu:"\u0427\u0435\u0440\u0442\u0432\u0435\u0440\u0433",fri:"\u041f\u044f\u0442\u043d\u0438\u0446\u0430",sat:"\u0421\u0443\u0431\u0431\u043e\u0442\u0430",sun:"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435"},weekDaysShort:{mon:"\u041f\u041d",tue:"\u0412\u0422",wed:"\u0421\u0420",thu:"\u0427\u0422",fri:"\u041f\u0422",sat:"\u0421\u0411",sun:"\u0412\u0421"},months:{jan:"\u042f\u043d\u0432\u0430\u0440\u044c",feb:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c",mar:"\u041c\u0430\u0440\u0442",apr:"\u0410\u043f\u0440\u0435\u043b\u044c",may:"\u041c\u0430\u0439",jun:"\u0418\u044e\u043d\u044c",jul:"\u0418\u044e\u043b\u044c",aug:"\u0410\u0432\u0433\u0443\u0441\u0442",sep:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",oct:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",nov:"\u041d\u043e\u044f\u0431\u0440\u044c",dec:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c"}}),h=function(e){return(5*(e-32)/9).toFixed()+" \xb0C"},y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={weather:[],selectedDayIdx:0},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getForecast",value:function(){var e=this;fetch("http://api.openweathermap.org/data/2.5/forecast/daily?&lat="+this.props.city.lat+"&lon="+this.props.city.lon+"&units=metric&cnt=7&appid=28d61ce481690736b87603364680739c").then((function(e){return e.json()})).then((function(t){var a=t.list;e.setState({weather:a.map((function(e){var t=e.temp,a=e.dt,n=e.humidity,r=e.weather;return{humidity:n,pressure:e.pressure,main:m.weatherTypes[r[0].main.toLowerCase()],date:{weekDayShort:m.weekDaysShort[String(new Date(1e3*a)).split(" ")[0].toLowerCase()],weekDay:m.weekDays[String(new Date(1e3*a)).split(" ")[0].toLowerCase()],month:m.months[String(new Date(1e3*a)).split(" ")[1].toLowerCase()],day:String(new Date(1e3*a)).split(" ")[2]},temp:{day:h(t.day),night:h(t.night)}}}))})}))}},{key:"componentDidMount",value:function(){this.getForecast()}},{key:"selectDayIdx",value:function(e){this.setState({selectedDayIdx:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"CityForecast"},r.a.createElement("div",null,this.props.city.name),r.a.createElement("div",null,this.props.city.country),r.a.createElement("button",{onClick:function(){return e.props.onClose()}},"X"),this.state.weather.map((function(t,a){return e.state.selectedDayIdx==a?r.a.createElement("div",{key:a},r.a.createElement("div",null,"\u0414\u0435\u043d\u044c: ",t.date.weekDay," ",t.date.day," ",t.date.month),r.a.createElement("div",null,"\u0412 \u043e\u0431\u0449\u0435\u043c: ",t.main),r.a.createElement("div",null,"\u0414\u043d\u0435\u043c: ",t.temp.day),r.a.createElement("div",null,"\u041d\u043e\u0447\u044c\u044e: ",t.temp.day),r.a.createElement("div",null,"\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c: ",t.humidity),r.a.createElement("div",null,"\u0414\u0430\u0432\u043b\u0435\u043d\u0438\u0435: ",t.pressure),r.a.createElement("br",null)):""})),this.state.weather.map((function(t,a){return r.a.createElement("button",{onClick:function(){return e.selectDayIdx(a)},key:a,className:e.state.selectedDayIdx==a?"CityForecast-button--active":""},t.date.weekDayShort)})))}}]),t}(n.Component),p=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={searchField:"",cities:[],selectedCity:null},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getCities",value:function(){var e=this;fetch("https://geocode-maps.yandex.ru/1.x/?apikey=ff4781d8-005f-4319-9140-9fac60c1f425&format=json&geocode="+this.state.searchField+"&results=50").then((function(e){return e.json()})).then((function(t){var a=t.response.GeoObjectCollection.featureMember;e.setState({cities:a.filter((function(e){return"locality"===e.GeoObject.metaDataProperty.GeocoderMetaData.kind})).map((function(e){var t=e.GeoObject,a=t.Point,n=t.metaDataProperty.GeocoderMetaData,r=t.name;return{lon:a.pos.split(" ")[0],lat:a.pos.split(" ")[1],name:r,country:n.AddressDetails.Country.CountryName}}))}),console.log(e.state.cities)}))}},{key:"selectCity",value:function(e){this.setState({selectedCity:e,cities:[]})}},{key:"closeCity",value:function(){this.setState({selectedCity:null})}},{key:"searchInput",value:function(e){var t=this;if(clearTimeout(window.counter),this.setState({searchField:e,selectedCity:null}),""===e)return this.setState({cities:[]});window.counter=setTimeout((function(){return t.getCities()}),1e3)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"CitySelector"},r.a.createElement("div",null,r.a.createElement("div",{className:"CitySelector-search"},null==this.state.selectedCity?r.a.createElement("div",null,r.a.createElement("div",{className:"CitySelector-inputWrap"},r.a.createElement("input",{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442...",className:"CitySelector-input",id:"standard-uncontrolled",label:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0440\u043e\u0434...",onChange:function(t){return e.searchInput(t.target.value)}})),r.a.createElement("div",{className:"CitySelector-list"},this.state.cities.map((function(t,a){return r.a.createElement("div",{className:"CitySelector-listItem",key:a,onClick:function(){return e.selectCity(t)}},r.a.createElement("div",null,t.name,", ",t.country))})))):r.a.createElement(y,{onClose:this.closeCity.bind(this),city:this.state.selectedCity}))))}}]),t}(n.Component);var f=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[8,1,2]]]);
//# sourceMappingURL=main.e465c784.chunk.js.map